(function(c){c.fn.forms=function(g){return this.each(function(){var h=c(this),a=h.data("forms")||{errorCl:"error",emptyCl:"empty",invalidCl:"invalid",notRequiredCl:"notRequired",successCl:"success",successShow:"4000",mailHandlerURL:templateUrl+"/mail/MailHandler.php ",ownerEmail:"",stripHTML:!0,smtpMailServer:"localhost",targets:"input,textarea",controls:"a[data-type=reset],a[data-type=submit]",validate:!0,rx:{".name":{rx:/^[a-zA-Z'][a-zA-Z-' ]+[a-zA-Z']?$/,target:"input"},".state":{rx:/^[a-zA-Z'][a-zA-Z-' ]+[a-zA-Z']?$/,
target:"input"},".email":{rx:/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i,target:"input"},".phone":{rx:/^\+?(\d[\d\-\+\(\) ]{5,}\d$)/,target:"input"},".fax":{rx:/^\+?(\d[\d\-\+\(\) ]{5,}\d$)/,target:"input"},".message":{rx:/.{20}/,target:"textarea"}},preFu:function(){a.labels.each(function(){var b=
c(this),d=c(a.targets,this),e=d.val(),f=function(){var a=d.is("input")?(a=b.html().match(/value=['"](.+?)['"].+/),!!a&&!!a[1]&&a[1]):d.html();return""==e?e:a}();f!=e&&d.val(e=f||e);b.data({defVal:e});d.bind("focus",function(){d.val()==e&&(d.val(""),a.hideEmptyFu(b),b.removeClass(a.invalidCl))}).bind("blur",function(){a.validateFu(b);a.isEmpty(b)&&(d.val(e),a.hideErrorFu(b.removeClass(a.invalidCl)))}).bind("keyup",function(){b.hasClass(a.invalidCl)&&a.validateFu(b)});b.find("."+a.errorCl+",."+a.emptyCl).css({display:"block"}).hide()});
a.success=c("."+a.successCl,a.form).hide()},isRequired:function(b){return!b.hasClass(a.notRequiredCl)},isValid:function(b){var d=!0;c.each(a.rx,function(a,c){b.is(a)&&(d=c.rx.test(b.find(c.target).val()))});return d},isEmpty:function(b){var d;return""==(d=b.find(a.targets).val())||d==b.data("defVal")},validateFu:function(b){b.each(function(){var b=c(this),e=a.isRequired(b),f=a.isEmpty(b),g=a.isValid(b);f&&e?a.showEmptyFu(b.addClass(a.invalidCl)):a.hideEmptyFu(b.removeClass(a.invalidCl));f||(g?a.hideErrorFu(b.removeClass(a.invalidCl)):
a.showErrorFu(b.addClass(a.invalidCl)))})},getValFromLabel:function(a){var d=c("input,textarea",a).val(),e=a.data("defVal");return a.length?d==e?"nope":d:"nope"},submitFu:function(){a.validateFu(a.labels);a.form.has("."+a.invalidCl).length||c.ajax({type:"POST",url:a.mailHandlerURL,data:{name:a.getValFromLabel(c(".name",a.form)),email:a.getValFromLabel(c(".email",a.form)),phone:a.getValFromLabel(c(".phone",a.form)),fax:a.getValFromLabel(c(".fax",a.form)),state:a.getValFromLabel(c(".state",a.form)),
message:a.getValFromLabel(c(".message",a.form)),owner_email:a.ownerEmail,stripHTML:a.stripHTML},success:function(){a.showFu()}})},showFu:function(){a.success.slideDown(function(){setTimeout(function(){a.success.slideUp();a.form.trigger("reset")},a.successShow)})},controlsFu:function(){c(a.controls,a.form).each(function(){var b=c(this);b.bind("click",function(){a.form.trigger(b.data("type"));return!1})})},showErrorFu:function(b){b.find("."+a.errorCl).slideDown()},hideErrorFu:function(b){b.find("."+
a.errorCl).slideUp()},showEmptyFu:function(b){b.find("."+a.emptyCl).slideDown();a.hideErrorFu(b)},hideEmptyFu:function(b){b.find("."+a.emptyCl).slideUp()},init:function(){a.form=a.me;a.labels=c("label",a.form);a.preFu();a.controlsFu();a.form.bind("submit",function(){a.validate?a.submitFu():a.form[0].submit();return!1}).bind("reset",function(){a.labels.removeClass(a.invalidCl);a.labels.each(function(){var b=c(this);a.hideErrorFu(b);a.hideEmptyFu(b)})});a.form.trigger("reset")}};a.me||a.init(a.me=h.data({forms:a}));
"object"==typeof g&&c.extend(a,g)})}})(jQuery);$(window).load(function(){$("#ContactForm").forms({ownerEmail:"#"})});